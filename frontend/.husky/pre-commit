#!/bin/sh
. "$(dirname "$0")/_/husky.sh"
git diff --cached --name-only --diff-filter=ACMRTUXB >frontend/.husky/staged-files
echo "frontend .........."
cd frontend
echo "running eslint ó°Ž™ ....."
#npm run lint
echo "running prettier ó°Ž™ ..."
npx lint-staged
echo "backend ..............."
cd ../backend
echo "running golangci-lint î˜§ ......"
golangci-lint run -v
go mod tidy -v
echo "running go fmt î˜§ ...."
go fmt
echo "Running Go tests î˜§ .."
cd tests
go test -v
cd ../../
git add $(cat frontend/.husky/staged-files)
echo "All checks passed! ðŸŽ‰"
